(function(){"use strict";var t,e=[].slice;t=function(t){var n,r,o,i,u,s,c,f;return i=t.Types,r=t.Strings,u=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},s=function(t,e,n){var r,o;null==t&&(t={});for(r in e)o=e[r],i.isObject(o)&&s(t[r],o,n),n&&t.hasOwnProperty(r)||(t[r]=o);return t},c=function(t,e){var n,r,o;return e=i.forceFunction(e,function(){return!0}),o=function(t){var u,s,c,f;for(u in t)if(f=t[u],!i.notObject(t)){if(n.push(u),s=e(u,f,n)){if(i.isObject(s))if(s.remove===!0)delete t[u];else{if(i.isDefined(s.value)){f=t[u]=s.value;continue}i.isDefined(s.key)&&""!==(c=i.forceString(s.key))&&(t.hasOwnProperty(c)||(t[c]=f,delete t[u]))}if(r.push({key:u,value:f,path:n.join(" ")}),(null!=s?s.stop:void 0)===!0)return}o(f),n.pop()}},r=[],n=[],o(t),r},f=function(t,e,n){var o,u,s,c,f,p;if(c=r.oneSpaceAndTrim(i.forceString(e)).split(" "),""!==c[0]){if(s=c.length-2,s>-1){for(o=p=0;s>=0?s>=p:p>=s;o=s>=0?++p:--p)if(void 0===(t=t[c[o]]))return}else o=0;if(u=c[o],i.isDefined(n)&&t.hasOwnProperty(u)){if(n.remove)return delete t[u];n.key&&!t.hasOwnProperty(n.key)&&(t[n.key]=t[u],delete t[u],u=n.key),n.value&&t.hasOwnProperty(u)&&(t[u]=n.value)}return f=t[u]}},o=function(){function o(t,e){this.object={},t&&o.add(this.object,t,e)}return o.Types=t.Types,o.Strings=t.Strings,o.Words=t,o.empty=function(t){return i.notObject(t)||t instanceof Number?!1:u(t)},o.extend=function(t,e){return s(i.forceObject(t),i.forceObject(e))},o.append=function(t,e){return s(i.forceObject(t),i.forceObject(e),!0)},o.add=function(e,n,r){var o,u,c,f,p,h,l;if(null==e&&(e={}),i.isObject(n))return s(e,n,!0);for(n=new t(n),f=i.isObject(r),c=e,l=n.words,o=p=0,h=l.length;h>p;o=++p)u=l[o],(o<n.count-1||f)&&null==c[u]&&(c[u]={}),o<n.count-1?c.hasOwnProperty(u)&&(c=c[u]):f?s(c[u],r,!0):null==c[u]&&(c[u]=r);return e},o.xs=function(t,e){return i.notObject(t)?[]:c(t,e)},o.copy=function(t){var e;return i.notObject(t)?{}:(e=function(t,n){var r,o;for(r in n)o=n[r],i.isObject(n)?t[r]=o:e(o);return t})({},t)},o.get=function(t,e,n){return i.isObject(t)?f(t,e,n):""},o.getn=function(t,e,n){return i.forceNumber(o.get(t,e),n)},o.gets=function(t,e){return i.forceString(o.get(t,e))},o.geta=function(t,e){return i.forceArray(o.get(t,e))},o.geto=function(t,e){return i.forceObject(o.get(t,e))},o.keys=function(t,e){var n,r;if(r=[],i.isObject(e=o.get(t,e)))for(n in e)r.push(n);return r},o.values=function(t,e){var n,r,u;if(u=[],i.isObject(e=o.get(t,e)))for(n in e)r=e[n],u.push(r);return u},o.prototype.xs=function(t){return o.xs(this.object,t)},o.prototype.empty=function(){return u(this.object)},o.prototype.copy=function(){return o.copy(this.object)},o.prototype.add=function(t,e){return o.add(this.object,t,e)},o.prototype.remove=function(t){return f(this.object,t,{remove:!0})},o.prototype.removeAll=function(t){return""!==(t=r.trim(t))&&o.xs(this.object,function(e){return e===t?{remove:!0}:void 0}),this},o.prototype.set=function(t,e){var n,r,u,s;if(""===(t=i.forceString(t)))return"";if(e=f(this.object,t,{value:e}))if(i.isObject(e))for(r=new o(e).search(),u=0,s=r.length;s>u;u++)n=r[u],this.triggerListener(t+" "+n.path,e);else this.triggerListener(t,e);return e},o.prototype.setAll=function(t,e){var n,i,u,s;if(""!==(t=r.trim(t)))for(o.xs(this.object,function(n){return n===t?{value:e}:void 0}),s=this.search(t),i=0,u=s.length;u>i;i++)n=s[i],this.triggerListener(n.path,e);return this},o.prototype.setKey=function(t,e){return f(this.object,t,{key:e})},o.prototype.setAllKeys=function(t,e){return""!==(t=r.trim(t))&&o.xs(this.object,function(n){return n===t?{key:e}:void 0}),this},o.prototype.search=function(t){var e,n;return i.isDefined(t)&&""===(t=r.trim(t))?[]:(e=t?function(e){return e===t?!0:void 0}:function(){return!0},n=this.xs(e))},o.prototype.list=function(e){var n;return""===(e=r.oneSpaceAndTrim(e))?[]:(n=e?function(n){return new t(n.join(" ")).startsWith(e)?!0:void 0}:function(){return!0},this.xs(function(t,e,r){return n(r)}))},o.prototype.get=function(t){return void 0===t?this.object:f(this.object,t)},o.prototype.getn=function(t,e){return o.getn(this.object,t,e)},o.prototype.gets=function(t){return o.gets(this.object,t)},o.prototype.geta=function(t){return o.geta(this.object,t)},o.prototype.geto=function(t){return o.geto(this.object,t)},o.prototype.keys=function(t){var e,n;if(n=[],i.isObject(t=f(this.object,t)))for(e in t)n.push(e);return n},o.prototype.values=function(t){var e,n,r;if(r=[],i.isObject(t=f(this.object,t)))for(e in t)n=t[e],r.push(n);return r},o.prototype.paths=function(t){var e,n,r,o,i;for(n=[],i=this.search(t),r=0,o=i.length;o>r;r++)e=i[r],n.push(e.path);return n},o.prototype.addListener=function(t,e){return this.listeners||(this.listeners=new n),this.listeners.add(t,e)},o.prototype.triggerListener=function(t,e){return this.listeners&&this.listeners.trigger(t,e),this},o.prototype.removeListener=function(){var t,n,r,o;if(n=1<=arguments.length?e.call(arguments,0):[],this.listeners)for(r=0,o=n.length;o>r;r++)t=n[r],this.listeners.remove(t);return this},o}(),n=function(){function e(t){this.listeners=null!=t?t:new o}return e.count=0,e.newName=function(){return""+ ++e.count},e.prototype.add=function(t,n){var o,i,u,s;return t=r.oneSpaceAndTrim(t),i=e.newName(),(o=this.listeners.get(t))?o[i]=n:(u={},u[i]=n,this.listeners.add(t,u)),s=this.listeners.get(t),{trigger:function(e){return null==e&&(e=""),"function"==typeof s[i]?s[i](t,e):void 0},remove:function(){return delete s[i]}}},e.prototype.trigger=function(e,n){var o,i,u,s,c,f,p,h,l,a;for(null==n&&(n=""),a=this.listeners.search("*"),h=0,l=a.length;l>h;h++)if(p=a[h],i=p.value,new t(e).startsWith(new t(p.path).remove(-1).$))for(f in i)o=i[f],"function"==typeof o&&o(e,n);c=this.listeners.get(r.oneSpaceAndTrim(e));for(u in c)s=c[u],"function"==typeof s&&s(e,n);return this},e.prototype.remove=function(t){return this.listeners.remove(r.oneSpaceAndTrim(t)),this},e}(),o.prototype.ls=o.prototype.list,o.prototype.find=o.prototype.search,o},"undefined"!=typeof define&&null!==define&&"function"==typeof define&&define.amd?define("xs",["words"],function(e){return t(e)}):"undefined"!=typeof window&&null!==window?window.Xs=t(window.Words):"undefined"!=typeof module&&null!==module&&(module.exports=t(require("words.js")))}).call(this);