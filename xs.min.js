(function(){"use strict";var t,e,n,r,o,i,u,s,c,f={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h=[].slice;"undefined"!=typeof window&&null!==window?n=window.Words:"undefined"!=typeof module&&null!==module&&(n=require("words.js")),e=n.Strings,o=n.Types,i=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},u=function(t,e,n){var r,i;null==t&&(t={});for(r in e)i=e[r],o.isObject(i)&&u(t[r],i,n),n&&o.isDefined(t[r])||(t[r]=i);return t},s=function(t,e){var n,r,i;return e=o.forceFunction(e,function(){return!0}),i=function(t){var u,s,c,f;for(u in t)if(f=t[u],!o.notObject(t)){if(n.push(u),s=e(u,f,n)){if(o.isObject(s))if(s.remove===!0)delete t[u];else{if(o.isDefined(s.value)){f=t[u]=s.value;continue}o.isDefined(s.key)&&""!==(c=o.forceString(s.key))&&(t.hasOwnProperty(c)||(t[c]=f,delete t[u]))}if(r.push({key:u,value:f,path:n.join(" ")}),(null!=s?s.stop:void 0)===!0)return}i(f),n.pop()}},r=[],n=[],i(t),r},c=function(t,n,r){var i,u,s,c,f,p;if(s=e.oneSpaceAndTrim(o.forceString(n)).split(" "),""!==s[0]){if(u=s.length-2,u>-1){for(i=p=0;u>=0?u>=p:p>=u;i=u>=0?++p:--p)if(void 0===(t=t[s[i]]))return}else i=0;if(f=s[i],o.isDefined(r)&&t.hasOwnProperty(f)){if(r.remove)return delete t[f];r.key&&!t.hasOwnProperty(r.key)&&(t[r.key]=t[f],delete t[f],f=r.key),r.value&&t.hasOwnProperty(f)&&(t[f]=r.value)}return c=t[f]}},r=function(r){function f(t,e){this.object={},t&&f.add(this.object,t,e)}return p(f,r),f.empty=function(t){return o.notObject(t)||t instanceof Number?!1:i(t)},f.extend=function(t,e){return u(o.forceObject(t),o.forceObject(e))},f.append=function(t,e){return u(o.forceObject(t),o.forceObject(e),!0)},f.add=function(t,e,r){var i,s,c,f,p,h,l;if(null==t&&(t={}),o.isObject(e))return u(t,e,!0);for(e=new n(e),f=o.isObject(r),c=t,l=e.words,i=p=0,h=l.length;h>p;i=++p)s=l[i],(i<e.count-1||f)&&null==c[s]&&(c[s]={}),i<e.count-1?c=c[s]:f?u(c[s],r,!0):null==c[s]&&(c[s]=r);return t},f.xs=function(t,e){return o.notObject(t)?[]:s(t,e)},f.copy=function(t){var e;return o.notObject(t)?{}:(e=function(t,n){var r,i;for(r in n)i=n[r],o.isObject(n)?t[r]=i:e(i);return t})({},t)},f.get=function(t,e,n){return o.isObject(t)?c(t,e,n):""},f.getn=function(t,e,n){return o.forceNumber(f.get(t,e),n)},f.gets=function(t,e){return o.forceString(f.get(t,e))},f.geta=function(t,e){return o.forceArray(f.get(t,e))},f.geto=function(t,e){return o.forceObject(f.get(t,e))},f.keys=function(t,e){var n,r;if(r=[],o.isObject(e=f.get(t,e)))for(n in e)r.push(n);return r},f.values=function(t,e){var n,r,i;if(i=[],o.isObject(e=f.get(t,e)))for(n in e)r=e[n],i.push(r);return i},f.prototype.xs=function(t){return f.xs(this.object,t)},f.prototype.empty=function(){return i(this.object)},f.prototype.copy=function(){return f.copy(this.object)},f.prototype.add=function(t,e){return f.add(this.object,t,e)},f.prototype.remove=function(t){return c(this.object,t,{remove:!0})},f.prototype.removeAll=function(t){return""!==(t=e.trim(t))&&f.xs(this.object,function(e){return e===t?{remove:!0}:void 0}),this},f.prototype.set=function(t,e){var n,r,i,u;if(""===(t=o.forceString(t)))return"";if(e=c(this.object,t,{value:e}),o.isObject(e))for(r=new f(e).search(),i=0,u=r.length;u>i;i++)n=r[i],this.triggerListener(t+" "+n.path,e);else this.triggerListener(t,e);return e},f.prototype.setAll=function(t,n){var r,o,i,u;if(""!==(t=e.trim(t)))for(f.xs(this.object,function(e){return e===t?{value:n}:void 0}),u=this.search(t),o=0,i=u.length;i>o;o++)r=u[o],this.triggerListener(r.path,n);return this},f.prototype.setKey=function(t,e){return c(this.object,t,{key:e})},f.prototype.setAllKeys=function(t,n){return""!==(t=e.trim(t))&&f.xs(this.object,function(e){return e===t?{key:n}:void 0}),this},f.prototype.search=function(t){var n,r;return o.isDefined(t)&&""===(t=e.trim(t))?[]:(n=t?function(e){return e===t?!0:void 0}:function(){return!0},r=this.xs(n))},f.prototype.list=function(t){var r;return""===(t=e.oneSpaceAndTrim(t))?[]:(r=t?function(e){return new n(e.join(" ")).startsWith(t)?!0:void 0}:function(){return!0},this.xs(function(t,e,n){return r(n)}))},f.prototype.get=function(t){return void 0===t?this.object:c(this.object,t)},f.prototype.getn=function(t,e){return f.getn(this.object,t,e)},f.prototype.gets=function(t){return f.gets(this.object,t)},f.prototype.geta=function(t){return f.geta(this.object,t)},f.prototype.geto=function(t){return f.geto(this.object,t)},f.prototype.keys=function(t){var e,n;if(n=[],o.isObject(t=c(this.object,t)))for(e in t)n.push(e);return n},f.prototype.values=function(t){var e,n,r;if(r=[],o.isObject(t=c(this.object,t)))for(e in t)n=t[e],r.push(n);return r},f.prototype.paths=function(t){var e,n,r,o,i;for(n=[],i=this.search(t),r=0,o=i.length;o>r;r++)e=i[r],n.push(e.path);return n},f.prototype.addListener=function(e,n){return this.listeners||(this.listeners=new t),this.listeners.add(e,n)},f.prototype.triggerListener=function(t,e){return this.listeners&&this.listeners.trigger(t,e),this},f.prototype.removeListener=function(){var t,e,n,r;if(e=1<=arguments.length?h.call(arguments,0):[],this.listeners)for(n=0,r=e.length;r>n;n++)t=e[n],this.listeners.remove(t);return this},f}(o),t=function(){function t(t){this.listeners=null!=t?t:new r}return t.count=0,t.newName=function(){return""+ ++t.count},t.prototype.add=function(n,r){var o,i,u,s;return n=e.oneSpaceAndTrim(n),i=t.newName(),(o=this.listeners.get(n))?o[i]=r:(u={},u[i]=r,this.listeners.add(n,u)),s=this.listeners.get(n),{trigger:function(){return function(t){return null==t&&(t=""),"function"==typeof s[i]?s[i](n,t):void 0}}(this),remove:function(){return function(){return delete s[i]}}(this)}},t.prototype.trigger=function(t,r){var o,i,u,s,c,f,p,h,l,a;for(null==r&&(r=""),t=new n(t),c=this.listeners.search("*"),l=0,a=c.length;a>l;l++)if(p=c[l],i=p.value,h=new n(p.path).pop().$,t.startsWith(h))for(f in i)o=i[f],"function"==typeof o&&o(t.$,r);c=this.listeners.get(e.oneSpaceAndTrim(t.$));for(u in c)s=c[u],"function"==typeof s&&s(t.$,r);return this},t.prototype.remove=function(t){return this.listeners.remove(e.oneSpaceAndTrim(t)),this},t}(),r.Types=n.Types,r.Strings=n.Strings,r.Words=n,"undefined"!=typeof window&&null!==window?window.Xs=r:"undefined"!=typeof module&&null!==module&&(module.exports=r)}).call(this);