(function(){"use strict";var t,n,e,r,i,o,u,s,f,c,a,p,l,h,g=[].slice;a=function(t,n){return n instanceof t},l=function(t,n){return null==n&&(n="object"),typeof t===n},t={Boolean:!1,String:"",Object:{},Array:[],Function:function(){},Number:function(){var t;return t=new Number,t["void"]=!0,t}()},r={Undefined:function(t){return void 0===t},Null:function(t){return null===t},Function:function(t){return l(t,"function")},Boolean:function(t){return l(t,"boolean")},String:function(t){return l(t,"string")},Array:function(t){return l(t)&&a(Array,t)},RegExp:function(t){return l(t)&&a(RegExp,t)},Date:function(t){return l(t)&&a(Date,t)},Number:function(t){return l(t,"number")&&t===t||l(t)&&a(Number,t)},Object:function(t){return!(!l(t)||null===t||a(Boolean,t)||a(Number,t)||a(Array,t)||a(RegExp,t)||a(Date,t))},NaN:function(t){return l(t,"number")&&t!==t},Defined:function(t){return void 0!==t}},r.StringOrNumber=function(t){return r.String(t)||r.Number(t)},o=h={parseIntBase:10},c=function(n){var e;return e=function(t){switch(n){case"Number":if(h.isNumber(t=parseInt(t,h.parseIntBase))&&!t["void"])return t;break;case"String":if(h.isStringOrNumber(t))return t+"";break;default:if(o["is"+n](t))return t}},function(r,i){return null!=r&&void 0!==(r=e(r))?r:null!=i&&void 0!==(i=e(i))?i:t[n]}},p=function(t,n,e){var i,o,u;if(null==e&&(e=[]),e.length<1)return t===r.Undefined;for(o=0,u=e.length;u>o;o++)if(i=e[o],t(i)===n)return n;return!n},f=!0,function(){var n,e,i;i=[];for(n in r)e=r[n],i.push(function(n,e){return o["is"+n]=e,o["not"+n]=function(t){return!e(t)},o["has"+n]=function(){return p(e,f,arguments)},o["all"+n]=function(){return p(e,!f,arguments)},n in t?o["force"+n]=c(n):void 0}(n,e));return i}(),o.intoArray=function(){var t;return t=1<=arguments.length?g.call(arguments,0):[],t.length<2&&(h.isString(t[0])?t=t.join("").replace(/^\s+|\s+$/g,"").replace(/\s+/g," ").split(" "):h.isArray(t[0])&&(t=t[0])),t},o["typeof"]=function(t){var n,e;for(n in r)if(e=r[n],e(t)===!0)return n.toLowerCase()},i=function(){function t(){}return t.positiveIndex=function(t,n){return 0===(t=h.forceNumber(t,0))?!1:(n=Math.abs(h.forceNumber(n)),Math.abs(t)<=n?t>0?t-1:n+t:!1)},t.noDupAndReverse=function(t){var n,e,r,i;for(e=t.length-1,r=[],n=i=e;0>=e?0>=i:i>=0;n=0>=e?++i:--i)r[r.length-1]!==t[n]&&r.push(t[n]);return r},t.insertSort=function(){var t,n,e,r,i,o;if(t=h.intoArray.apply(this,arguments),t.length>1)for(r=t.length-1,e=o=1;r>=1?r>=o:o>=r;e=r>=1?++o:--o){for(n=t[e],i=e-1;i>=0&&t[i]>n;)t[i+1]=t[i],--i;t[+i+1]=n}return t},t}(),e=function(){function t(){}return t.create=function(){var t,n,e,r;for(n="",e=0,r=arguments.length;r>e;e++)t=arguments[e],n+=h.forceString(t);return n},t.trim=function(t){return null==t&&(t=""),(t+"").replace(/^\s+|\s+$/g,"")},t.oneSpace=function(t){return null==t&&(t=""),(t+"").replace(/\s+/g," ")},t.oneSpaceAndTrim=function(n){return t.oneSpace(t.trim(n))},t.create=function(){var t,n,e,r;for(n="",e=0,r=arguments.length;r>e;e++)t=arguments[e],n+=h.forceString(t);return n},t.split=function(n,e){var r,i,o,u,s;if(n=t.oneSpaceAndTrim(n),i=[],n.length<1)return i;for(e=h.forceString(e," "),r=n.split(e[0]||""),u=0,s=r.length;s>u;u++)o=r[u],o.match(/^\s$/)||i.push(t.trim(o));return i},t}(),u=function(){function t(){this.set.apply(this,arguments)}return t.delimiter=" ",t.prototype.get=function(){var n,r,o,u;if(arguments.length<1)return this.words.join(t.delimiter);for(r="",o=0,u=arguments.length;u>o;o++)n=arguments[o],n=i.positiveIndex(n,this.count),n!==!1&&(r+=this.words[n]+t.delimiter);return e.trim(r)},t.prototype.set=function(){var n,r,i,o,u,s,f,c;if(r=1<=arguments.length?g.call(arguments,0):[],this.words=[],r=h.intoArray.apply(this,r),r.length<1)return this;for(o=0,s=r.length;s>o;o++)for(n=r[o],c=e.split(e.create(n),t.delimiter),u=0,f=c.length;f>u;u++)i=c[u],this.words.push(i);return this},t.prototype.xs=function(t){var n,e,r,i,o,u,s;if(null==t&&(t=function(){return!0}),h.notFunction(t)||this.count<1)return this;for(r=[],s=this.words,n=o=0,u=s.length;u>o;n=++o)i=s[n],(e=t(i,n))&&(e===!0?r.push(i):h.isStringOrNumber(e)&&r.push(e+""));return this.words=r,this},t.prototype.startsWith=function(n){var e;return""===(n=h.forceString(n))?!1:(e=!0,n=new t(n),n.xs(function(t){return function(n,r){return n!==t.words[r]?e=!1:void 0}}(this)),e)},t.prototype.remove=function(){var t,n,e,r,o,u,s;if(arguments.length<1)return this;for(n=[],r=0,u=arguments.length;u>r;r++)t=arguments[r],h.isString(t)?n.unshift(t):h.isNumber(t)&&n.push(i.positiveIndex(t,this.count));for(n=i.noDupAndReverse(i.insertSort(n)),e=o=0,s=n.length;s>o;e=++o)t=n[e],h.isNumber(t)?this.xs(function(){return function(n,e){return e!==t?!0:void 0}}(this)):h.isString(t)&&this.xs(function(n){return n!==t?!0:void 0});return this},t}(),Object.defineProperty(u.prototype,"$",{get:function(){return this.get()}}),Object.defineProperty(u.prototype,"count",{get:function(){return this.words.length}}),s=function(){function t(n,e){this.object={},n&&t.add(this.object,n,e)}var r,s,f,c;return r=function(t){var n;for(n in t)if(t.hasOwnProperty(n))return!1;return!0},s=function(t,n,e){var r,i;null==t&&(t={});for(r in n)i=n[r],h.isObject(i)&&s(t[r],i,e),e&&t.hasOwnProperty(r)||(t[r]=i);return t},f=function(t,n){var e,r,i;return n=h.forceFunction(n,function(){return!0}),i=function(t){var o,u,s,f;for(o in t)if(f=t[o],!h.notObject(t)){if(e.push(o),u=n(o,f,e)){if(h.isObject(u))if(u.remove===!0)delete t[o];else{if(h.isDefined(u.value)){f=t[o]=u.value;continue}h.isDefined(u.key)&&""!==(s=h.forceString(u.key))&&(t.hasOwnProperty(s)||(t[s]=f,delete t[o]))}if(r.push({key:o,value:f,path:e.join(" ")}),(null!=u?u.stop:void 0)===!0)return}i(f),e.pop()}},r=[],e=[],i(t),r},c=function(t,n,r){var i,o,u,s,f,c;if(s=e.oneSpaceAndTrim(h.forceString(n)).split(" "),""!==s[0]){if(u=s.length-2,u>-1){for(i=c=0;u>=0?u>=c:c>=u;i=u>=0?++c:--c)if(void 0===(t=t[s[i]]))return}else i=0;if(o=s[i],h.isDefined(r)&&t.hasOwnProperty(o)){if(r.remove)return delete t[o];r.key&&!t.hasOwnProperty(r.key)&&(t[r.key]=t[o],delete t[o],o=r.key),r.value&&t.hasOwnProperty(o)&&(t[o]=r.value)}return f=t[o]}},t.Types=o,t.Tools=i,t.Strings=e,t.Words=u,t.empty=function(t){return h.notObject(t)||t instanceof Number?!1:r(t)},t.extend=function(t,n){return s(h.forceObject(t),h.forceObject(n))},t.append=function(t,n){return s(h.forceObject(t),h.forceObject(n),!0)},t.add=function(t,n,e){var r,i,o,f,c,a,p;if(null==t&&(t={}),h.isObject(n))return s(t,n,!0);for(n=new u(n),f=h.isObject(e),o=t,p=n.words,r=c=0,a=p.length;a>c;r=++c)i=p[r],(r<n.count-1||f)&&null==o[i]&&(o[i]={}),r<n.count-1?o.hasOwnProperty(i)&&(o=o[i]):f?s(o[i],e,!0):null==o[i]&&(o[i]=e);return t},t.xs=function(t,n){return h.notObject(t)?[]:f(t,n)},t.copy=function(t){var n;return h.notObject(t)?{}:(n=function(t,e){var r,i;for(r in e)i=e[r],h.isObject(e)?t[r]=i:n(i);return t})({},t)},t.get=function(t,n,e){return h.isObject(t)?c(t,n,e):""},t.getn=function(n,e,r){return h.forceNumber(t.get(n,e),r)},t.gets=function(n,e){return h.forceString(t.get(n,e))},t.geta=function(n,e){return h.forceArray(t.get(n,e))},t.geto=function(n,e){return h.forceObject(t.get(n,e))},t.keys=function(n,e){var r,i;if(i=[],h.isObject(e=t.get(n,e)))for(r in e)i.push(r);return i},t.values=function(n,e){var r,i,o;if(o=[],h.isObject(e=t.get(n,e)))for(r in e)i=e[r],o.push(i);return o},t.prototype.xs=function(n){return t.xs(this.object,n)},t.prototype.empty=function(){return r(this.object)},t.prototype.copy=function(){return t.copy(this.object)},t.prototype.add=function(n,e){return t.add(this.object,n,e)},t.prototype.remove=function(t){return c(this.object,t,{remove:!0})},t.prototype.removeAll=function(n){return""!==(n=e.trim(n))&&t.xs(this.object,function(t){return t===n?{remove:!0}:void 0}),this},t.prototype.set=function(n,e){var r,i,o,u;if(""===(n=h.forceString(n)))return"";if(e=c(this.object,n,{value:e}))if(h.isObject(e))for(i=new t(e).search(),o=0,u=i.length;u>o;o++)r=i[o],this.triggerListener(n+" "+r.path,e);else this.triggerListener(n,e);return e},t.prototype.setAll=function(n,r){var i,o,u,s;if(""!==(n=e.trim(n)))for(t.xs(this.object,function(t){return t===n?{value:r}:void 0}),s=this.search(n),o=0,u=s.length;u>o;o++)i=s[o],this.triggerListener(i.path,r);return this},t.prototype.setKey=function(t,n){return c(this.object,t,{key:n})},t.prototype.setAllKeys=function(n,r){return""!==(n=e.trim(n))&&t.xs(this.object,function(t){return t===n?{key:r}:void 0}),this},t.prototype.search=function(t){var n,r;return h.isDefined(t)&&""===(t=e.trim(t))?[]:(n=t?function(n){return n===t?!0:void 0}:function(){return!0},r=this.xs(n))},t.prototype.list=function(t){var n;return""===(t=e.oneSpaceAndTrim(t))?[]:(n=t?function(n){return new u(n.join(" ")).startsWith(t)?!0:void 0}:function(){return!0},this.xs(function(t,e,r){return n(r)}))},t.prototype.get=function(t){return void 0===t?this.object:c(this.object,t)},t.prototype.getn=function(n,e){return t.getn(this.object,n,e)},t.prototype.gets=function(n){return t.gets(this.object,n)},t.prototype.geta=function(n){return t.geta(this.object,n)},t.prototype.geto=function(n){return t.geto(this.object,n)},t.prototype.keys=function(t){var n,e;if(e=[],h.isObject(t=c(this.object,t)))for(n in t)e.push(n);return e},t.prototype.values=function(t){var n,e,r;if(r=[],h.isObject(t=c(this.object,t)))for(n in t)e=t[n],r.push(e);return r},t.prototype.paths=function(t){var n,e,r,i,o;for(e=[],o=this.search(t),r=0,i=o.length;i>r;r++)n=o[r],e.push(n.path);return e},t.prototype.addListener=function(t,e){return this.listeners||(this.listeners=new n),this.listeners.add(t,e)},t.prototype.triggerListener=function(t,n){return this.listeners&&this.listeners.trigger(t,n),this},t.prototype.removeListener=function(){var t,n,e,r;if(n=1<=arguments.length?g.call(arguments,0):[],this.listeners)for(e=0,r=n.length;r>e;e++)t=n[e],this.listeners.remove(t);return this},t}(),s.prototype.ls=s.prototype.list,s.prototype.find=s.prototype.search,n=function(){function t(t){this.listeners=null!=t?t:new s}return t.count=0,t.newName=function(){return""+ ++t.count},t.prototype.add=function(n,r){var i,o,u,s;return n=e.oneSpaceAndTrim(n),o=t.newName(),(i=this.listeners.get(n))?i[o]=r:(u={},u[o]=r,this.listeners.add(n,u)),s=this.listeners.get(n),{trigger:function(t){return null==t&&(t=""),"function"==typeof s[o]?s[o](n,t):void 0},remove:function(){return delete s[o]}}},t.prototype.trigger=function(t,n){var r,i,o,s,f,c,a,p,l,h;for(null==n&&(n=""),h=this.listeners.search("*"),p=0,l=h.length;l>p;p++)if(a=h[p],i=a.value,new u(t).startsWith(new u(a.path).remove(-1).$))for(c in i)r=i[c],"function"==typeof r&&r(t,n);f=this.listeners.get(e.oneSpaceAndTrim(t));for(o in f)s=f[o],"function"==typeof s&&s(t,n);return this},t.prototype.remove=function(t){return this.listeners.remove(e.oneSpaceAndTrim(t)),this},t}(),"undefined"!=typeof define&&null!==define&&"function"==typeof define&&define.amd?define("xs",[],function(){return s}):"undefined"!=typeof window&&null!==window?window.Xs=s:"undefined"!=typeof module&&null!==module&&(module.exports=s)}).call(this);